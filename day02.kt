fun main() {
   println(part1(input1))
   println(part1(input2))
   println(part2(input1))
   println(part2(input2))
}

data class State(val win: String, val lose: String, val draw: String)

fun play(rps: String): State =
	when (rps) {
        "A" -> State("B", "C", "A")
        "B" -> State("C", "A", "B")
        "C" -> State("A", "B", "C")
        else -> throw Exception("invalid input")
    }

val scoresByHand = mapOf("A" to 1, "B" to 2, "C" to 3).withDefault{0}
val scoresByState = mapOf("win" to 6, "draw" to 3, "lose" to 0).withDefault{0}

fun part1(input: String): Int {
    val rpsByPlayer = mapOf("X" to "A", "Y" to "B", "Z" to "C")
    return input.split("\n").map{ 
        val (opponent, player) = it.split(" ")
        val you = rpsByPlayer[player]
        val res = play(opponent)
		val score = when {
            res.win == you -> scoresByState.getValue("win")
            res.lose == you -> scoresByState.getValue("lose")
            res.draw == you -> scoresByState.getValue("draw")
            else -> throw Exception("invalid state")
        }
        score + scoresByHand.getValue(you)
    }.sum()
}

fun part2(input: String): Int? {
	return input.split("\n").map{ 
        val (opponent, state) = it.split(" ")
        val res = play(opponent)
		when (state) {
            "X" -> scoresByState.getValue("lose") + scoresByHand.getValue(res.lose)
			"Y" -> scoresByState.getValue("draw") + scoresByHand.getValue(res.draw)
            "Z" -> scoresByState.getValue("win") + scoresByHand.getValue(res.win)
            else -> throw Exception("invalid state")
        }
    }.sum()
}

val input1 = """A Y
B X
C Z"""

val input2 = """B Z
C Z
C Z
A Y
B Z
C Y
C Z
C Y
C X
A Z
B Z
C Z
A Y
C Z
B X
C Y
C Z
C X
C X
C Y
C Y
C X
A Y
C Y
C Y
C X
C Z
C X
A X
C Z
C Y
C Z
C Z
C Z
A Z
C Z
B Z
A Y
A X
A Y
C Z
A Y
C Z
A Z
C Y
C Y
C Y
A X
C X
C X
C Y
A X
A Y
C X
A X
C Z
A Y
C Z
C Y
A Y
C Z
A X
A Y
A X
C X
C Z
A X
B Z
C Z
C Y
C X
C X
C Z
C X
C Z
A X
C Y
A Y
C Y
C Z
C X
B X
B Z
C Z
C X
A X
B Z
A Y
A Y
B Z
A Y
C Y
B Z
B X
C X
C X
C X
A X
A Z
A Y
A Y
C Y
C Z
C Z
C Z
A Y
C X
A Y
A X
C X
C X
A X
A Y
A X
A X
A Y
C Y
A Y
A Y
A X
C X
B Z
A X
C Y
C X
C Z
C Z
C Z
C Z
C Y
C X
C X
A X
A Y
A X
C Z
C X
C Y
C Y
C Z
C Z
B Z
C Z
C Y
C X
C Y
A X
A Y
C X
B Z
B Y
C Z
C Y
C X
A Y
C Y
B Z
A Z
C X
C Z
C Y
C X
C Z
A X
A Y
C Y
C Y
A Y
A X
A X
C X
C X
C Z
A Y
A Y
C Y
C Z
A X
A Y
C X
C X
C Y
C X
C Z
C X
C Z
C Z
C Z
C Z
A Y
B Z
C Y
C Z
A Z
C X
C X
A X
A Z
C Z
C X
C Z
A X
B Z
B Z
A X
C X
C X
B Z
B Z
B Z
C Z
C X
A Y
C Z
A X
C Y
C Z
C Z
C X
C X
C Z
C Y
C Y
C X
C X
A X
C Y
A X
C Y
C X
B X
B Z
C X
C X
B X
C Z
C Y
A X
C Z
C Z
C Z
C Y
C X
A Y
A Z
C Z
B Z
C Z
C X
A Y
C X
C X
A X
C X
C Z
A X
C Z
C Y
C Y
C Y
C Z
A X
C Y
C X
C Z
A X
C Z
C X
C X
C X
A Y
C Z
A Y
C Z
C Y
C Z
A Y
C X
C X
C X
C Y
C Z
C X
C Y
C X
A X
C X
C Y
C X
C Z
C X
B Z
C X
B Z
B X
C X
C X
C X
B X
A Y
A Y
A X
B Z
C X
A Z
C Y
C X
C X
C Y
A Y
A Z
C X
A Y
C Z
C X
C X
C Y
C Y
A Z
A X
C Z
C X
C Z
B Y
A Y
C Z
A Y
C Z
A X
C Y
C Y
C X
A Y
C X
C X
B X
C Z
C X
C Y
C Z
C Z
C Y
C Y
C Y
C X
B Z
C X
C X
C Y
C Y
C Z
B Z
C X
C Y
B Z
C Z
A Y
C X
C X
A Y
C Y
C Z
C X
A Y
A Y
C Z
C Z
C Z
A X
C X
C Z
C Z
C Z
A Y
A X
C X
C Z
C X
C X
C Y
A Y
C X
C Y
C Z
C Y
A X
C X
C X
C Z
A X
B X
C Y
A X
C Y
C Y
C X
C Z
B X
C X
C Z
A Y
C Z
C X
A X
C Y
A X
C Z
A X
C X
C Y
C X
C Z
C X
C X
C Y
A X
C Y
A Y
C Z
C X
C X
A X
A Z
C X
C X
C Y
B Z
A X
A X
C X
B Z
C Z
A Y
C Y
C Z
C X
A Z
C Y
A X
C Y
C Z
C Z
C X
C Y
C X
C Y
C Y
C X
A Y
B X
C X
A X
A Y
C Y
C Z
C Y
C X
A Y
C Z
C X
C X
A Z
C Y
C Z
A X
C X
C Z
A Y
A X
B X
C Z
B Z
C X
A Z
C Z
A X
A Y
C X
A X
B Z
C X
C Y
C Z
C Y
C Y
C Z
C X
B X
C Y
B Y
C Z
A Y
A Y
C Y
C Z
A X
C Z
C Y
B Z
C X
A X
C X
C X
C Y
C Y
C Z
A Y
C Z
A X
A Y
C X
C Y
C Z
C X
A X
B Z
C Z
A X
C X
C X
C X
B Z
C Z
C Y
B Z
A X
C Z
C Y
A X
C X
B Z
C Y
C X
C Z
C Z
C Z
C X
C Y
B X
A X
B Z
C X
C Y
C Z
C X
C Z
C Z
C Z
C Y
A X
C X
C Z
A X
C X
C Z
B X
C Z
B Z
A Y
A X
C Z
C Z
C Y
C Z
C Y
C Z
A Y
B Z
A Y
C X
A X
A X
A X
B Z
C Z
B Y
C Y
A Y
A Y
C Z
A Y
C Z
C Z
A Y
C Z
C Z
C Z
A Y
C Z
C Z
C Z
C Z
A Y
C Y
A Y
C Y
C X
C X
C Z
C X
C Z
C Y
A X
C Z
B X
C Z
A X
C Z
C Z
C Y
C Z
C Y
C X
C Y
B X
C Z
C X
C Y
A Y
C X
C Z
C X
C Z
C X
A Z
C Z
C X
C X
B Z
C Z
C X
A X
C Y
A Y
C X
C Z
C Z
A Y
A X
B Y
C Y
C Y
C Y
C X
A X
C Z
C Y
C Z
C X
C Z
C Z
C Y
B X
C X
C Z
C X
C X
C Y
A X
B Z
A X
C X
C Z
B Z
A Y
C Y
B Z
C X
A Z
A X
C Z
C Z
C X
A Y
B Y
C X
C Z
B Y
A Y
A Y
C X
A X
C Y
C X
C X
C Z
A X
A X
A X
B Z
C Y
C Z
C X
A X
B Z
C Z
C Z
C X
C X
C X
C X
C Z
C Y
C Z
C Z
C Z
A Y
C Z
C X
C Y
C X
B Y
A Y
C Z
C X
C Z
A X
A X
C Y
C Y
C X
C Z
C Z
C Z
C X
C Z
C X
C Y
C X
C X
C Y
C Y
B Z
C Z
C Z
B Z
C Y
C Z
C Y
B Z
C X
C Z
C Y
C Z
A Y
C Z
B Z
C Z
C X
C X
A Z
C Z
C X
A Y
A Z
A X
C Y
C X
C Z
C X
C X
C Y
C X
C Z
C X
C Y
C Y
C Z
C Y
C Y
C Y
A Z
A Y
C Z
C Y
C Z
C X
A X
C Z
C Z
A Y
C Z
C X
C X
C X
C Z
C X
C Z
C Y
A Z
C Z
C Y
C Z
C X
C Y
C Y
C X
C X
C Z
A Y
C Y
B Z
A Y
C Y
C X
C Z
C X
C Y
C Z
A Y
A X
C Z
B Y
C Y
A X
C Y
C Z
B Z
C Y
C Z
C Z
B Z
C X
A Y
C Z
C X
B Y
B Z
C Z
B Z
C X
A X
A X
B Z
C Z
C Z
C Z
C Y
A Y
C Z
B X
C Y
A Z
C Y
C Y
A Y
C X
C Y
B Z
C X
C X
C X
B Z
C X
B Z
A X
C Y
C Y
A X
C X
A Y
C X
A X
C Z
A X
C X
C X
A Y
C Z
C Z
C X
C X
B Z
A Y
C Y
C X
A Y
C Z
A X
C X
B Z
C X
C X
B X
B X
B Z
C Z
C X
A Y
B Z
B Y
C X
C Z
A Y
C Z
C X
C X
B Z
C X
A Y
A X
A Z
C Z
C Y
B Z
C X
A X
C X
A X
C X
C X
C Z
A X
B Z
C Z
C X
C X
A X
C Z
C X
C X
C Z
C Y
C X
A X
C X
C X
C X
A X
C Z
C Z
C Y
B Z
C X
A Y
C Z
C X
C Y
B X
A X
C X
B Z
C Y
B X
A Y
B X
C Z
C Y
C X
C Z
A Y
A Y
C X
A X
C X
C X
A Y
A X
B X
C Y
A Y
C X
C Z
A Y
C Z
B Z
C Z
A X
C Y
C Y
C Y
A Y
A Z
A Y
C X
C X
A Y
C Y
A X
C Y
A Y
C X
C Y
B Z
C Z
C Z
B X
C Y
B X
A Y
A Y
A X
A Y
C Z
C Z
C Y
B Z
A Z
C X
C Z
A X
C X
C X
C Z
C Y
C X
A Y
C Z
B Z
A Y
A X
C Y
B X
C Z
A Y
C X
C Y
C X
A X
C Z
C Z
C X
C Z
A X
C X
C X
A Z
B Z
A X
C Y
C X
A X
C X
C Z
C Y
A Y
C X
A Y
A X
C Y
A Y
C X
A Y
C X
B Z
C X
C X
C X
C Z
C Z
C Z
B Z
C X
B Z
C X
A X
A Y
A Y
A X
C Y
A X
C Y
A Y
B Z
C X
C X
C Y
C X
C Z
A X
A Y
C Z
A X
C X
C X
B X
C X
A Y
C X
C Z
B Z
A X
B Z
C Y
C Z
C Y
C Y
C X
C Z
C Z
C Z
A X
C X
A X
A Y
A X
C Z
C Z
A Z
C Y
B Z
A X
C Z
C Z
C X
C X
A X
A Z
C Z
C X
C X
C Y
C Y
C Y
A Y
A Y
C Z
A X
C Z
C X
A X
C Y
C Z
C Y
A X
A Y
A X
C Z
B Z
C Z
A X
C X
C Y
C X
C X
C Y
C Z
C Z
C Y
C X
A Y
C Y
C Z
B Z
C Y
C Y
A X
C Z
B Z
C X
B Z
B Z
C Z
C X
C Z
A X
C Z
C X
A Y
A X
A Y
C Z
C Z
C Z
C Z
C X
B Z
C Y
C X
B Z
C X
A X
A Y
C X
A Z
A Y
A X
C Y
C Z
C Y
C Z
B Z
C Y
C X
A Y
B Z
C Z
C Z
C Y
C X
C Z
A Y
C Y
A Y
C Z
B Z
C Z
A X
C Z
C Z
C Y
C X
C Y
A X
C Y
C Z
C X
A X
B Z
C Y
C X
C Z
C Y
A X
C X
A Y
A Y
C X
C Z
C Y
B Z
B X
C Y
C X
C X
C Z
C Y
C X
C Z
C Y
A X
B Y
A X
A Y
C X
A X
A X
A X
C Y
B X
B Z
C Z
C X
C Z
A Y
C Y
C X
B Z
A X
C X
A Y
C X
C X
C X
B Z
C Z
C X
B X
C Z
C Y
C X
C Y
C Z
C Z
C Z
A X
C X
C X
C X
B Z
C Z
A Y
C X
B Z
B Z
A Y
A Y
B Z
C X
C Y
A X
C Y
C X
C Y
C Y
C X
B Z
C Z
C Z
C Z
C Y
A Y
C Z
C Y
A X
C X
C Z
C Y
A Y
C Z
C X
B Z
C X
C Z
C Z
C Y
A X
A Y
C Z
A Y
C Z
C X
C Z
C Z
A X
A X
C X
B Z
B Z
C Y
A Y
C X
C X
C Z
C Z
A Y
C Y
C Z
A X
C X
C Y
A Y
C X
C X
A Z
C X
C Y
C Z
C X
B Z
C X
A X
C Z
C Z
A X
C Z
C Y
C Z
C Z
A Y
C X
C X
C X
C Y
C Z
C X
C X
C Y
B Z
A X
C X
A Y
B Z
A Y
A X
A X
B X
C Y
A Y
C Y
C Z
A X
C X
A Y
A Y
C Z
C X
C Z
C Z
C Z
C Z
A Y
A Y
A X
C X
A Y
C Y
A X
C X
C X
C X
B Z
C Z
B Z
A X
C Z
C Z
C Y
C X
C X
C X
C Y
A Z
B X
B Z
C X
B Z
A X
A Y
C Z
B Y
C X
C X
A Y
C Y
C Y
C Z
C X
A X
B Z
C X
A X
A X
C X
A X
C Y
B X
C Z
C Z
C Z
C Z
C X
C Z
C X
C Z
C Z
A X
C Z
C X
B Z
A Y
C Z
B Z
C Y
C X
C X
C Z
C Y
C X
C Z
C X
B X
C Z
A Y
C X
B Z
A Y
A X
C X
C X
B Z
C Y
C Z
C X
C Z
C Z
C Z
B X
C X
C X
C Y
B Z
A Y
C Y
C Z
A Z
A Y
C Z
C Y
C Y
A X
B Z
B Z
C X
A X
C Z
B Z
C Z
C Y
C Z
C Y
A X
C X
C Y
C X
B X
C Y
A Y
C X
C Z
A Z
C Y
A X
C Z
C Y
B Z
C Y
C Z
A Y
C Z
C X
A Y
C X
C Z
C X
B Z
C X
A X
C Z
C Z
C X
C Z
C X
C Z
C Z
A Z
A X
B Z
B X
C Z
C X
B Z
C X
C Y
C Z
C Z
A X
A X
C Y
B Z
A X
C X
C Z
A Z
A Z
C Z
C Y
C X
C Y
C Z
A Z
A X
A Y
C X
C Z
A Y
C Y
A Y
A X
C Z
C X
C Z
C X
B Z
A Y
C X
A X
C X
B X
C X
A X
C X
A X
C Y
A Y
C X
A Y
C X
C Z
C X
B Z
A X
C Z
A X
C Z
C Z
C Y
C Z
C Y
C X
A Y
C X
A X
C Z
C X
A Y
C Y
C X
C X
C Z
C X
C Y
C X
C X
C X
C X
A Y
A Y
A Y
C Z
C X
B Y
B Y
A Y
C Z
C X
A Y
C Z
C Y
C X
C Z
A X
C Z
C Z
C Y
A X
A X
C Z
C X
C X
C X
C Z
C Z
A Y
C Y
A X
B Z
C Z
C Y
C Z
A X
C Z
C X
C X
A Y
C Z
C X
C Z
C Z
A Y
C Y
C Z
A X
C Y
C Z
A X
C X
A X
C X
C Z
C X
C Z
C Z
C Y
C Y
A Y
C Y
A X
C Y
C X
C Z
C X
A X
C X
A X
A Y
A X
C Z
A X
C Y
C X
A Y
C Z
C Z
C X
B X
C Z
C Y
A Y
B Z
C Y
C X
B Z
C X
A Y
A X
A X
A X
C X
A X
C X
C Z
C X
A X
C Y
A Y
C X
C Z
C X
C Z
C Y
C X
A X
C X
C Y
A Y
A X
B Z
C Y
B Z
C Y
C X
A Y
C X
C Z
C X
C Y
A X
C Y
C Y
C Z
C Y
C X
C Z
C X
C X
C X
C Z
C X
A Y
A Y
C X
C Z
B Z
C X
C Y
C X
C X
C Z
C Z
C X
C X
A Z
A X
C X
B Z
C Z
C Y
C Z
C X
C X
C X
C Z
C X
A X
A X
C Z
C X
A Z
C X
A X
A X
C Z
A X
A Y
C Z
A Z
A Y
C Y
C X
A Y
A X
C Z
C X
A Y
B Z
C Z
A X
C Z
C X
A X
A Y
C Z
C Y
C Z
C Z
B Z
C X
C Z
C Z
C Y
C X
C Z
C X
C X
B Z
B Z
A Y
B X
B Z
C Z
A Z
C Y
C X
C Z
C X
C X
A X
C X
A Y
B X
C Z
C Y
C X
C Z
C Y
C Y
C X
B Z
C X
B Z
C Y
C Y
C Y
C X
C X
A X
A X
A X
C Z
A X
C Z
C X
C Y
C Z
C Y
A Y
C Y
A X
A Y
C Y
C Z
C Z
A Y
C X
C X
A X
C Y
C X
C Y
A X
C X
C Y
C Z
C Z
B Z
A Y
C X
B Z
C Y
A X
C Z
C X
C Z
B X
C Z
C Z
C Z
C X
C Z
C Z
C X
C Z
C Z
B X
A X
C Y
C Z
A Y
C Y
C Z
C Z
C X
A Y
A X
C Y
C Y
A Y
C Z
C X
C X
C X
A Y
C X
B X
C Z
C Z
C X
C Z
C X
A Y
A Z
C Z
C Z
B X
C Y
A Z
A Y
C Z
C X
C Z
C X
A X
A Y
C Y
A X
C Z
C X
C Z
B X
C X
C Z
B Z
C Z
C Y
C Y
A X
C Z
C X
C Y
C Z
C Z
A Y
C Z
C Y
C Y
A X
B Z
C Z
A X
C Y
C Y
C Z
A X
C X
C Z
C X
C X
C Z
C Y
C X
C Z
B Z
C Y
A X
A X
C X
C Z
A X
C X
B Z
C Y
C Z
C Y
C X
C Z
B Y
C X
C Z
A X
C X
A X
C X
C Z
B Z
C Z
C Z
A Z
C Y
C X
A X
C Z
A X
A Y
C X
C Z
C Y
A Y
C Y
C X
A X
C X
C Y
C X
C X
C Z
C Z
C X
C Z
A X
A X
C X
C Z
B Z
A X
C X
C Z
C Y
C X
B Z
C X
C X
C X
B X
C Y
A Y
C Z
A Z
A Y
A Y
C Y
B Z
C Z
C Y
C X
C Z
C X
B Z
B X
A X
A Z
A Y
C Z
C Y
C Y
C X
B Y
C Y
C X
C X
B X
C Y
C Z
B Z
C X
C Y
A Y
C Z
C X
C Z
A X
C Z
A X
A Y
C Y
A Y
C Y
C Z
A X
C Y
C Y
C X
B X
C Z
C X
C Z
C Z
C Z
C X
C Z
C Y
C X
C Y
C X
C X
C X
C X
A Y
C X
A Y
C X
C Z
A X
A Z
C Z
C X
C X
C X
C X
B Z
C Z
C Z
C Y
C X
C Z
C X
B Z
B Z
C Z
C Z
C X
C X
C Z
B Z
C X
A Y
C X
C Z
C X
C Y
C Z
C Z
C X
C Z
A Y
A Y
C X
C Z
C Z
C X
C X
B Z
C X
C Z
C Z
C X
C Z
A X
C Z
B Z
C Z
A Y
C Z
C X
C X
B Z
A Y
C Z
A Y
C Y
A Z
C X
A X
C X
A Y
C Z
C X
C Z
C Z
C X
C Z
A X
B Z
C Y
C Z
C Z
C X
C Z
B Z
C Y
C Z
C Z
A X
B Z
A X
B Z
C X
C Z
A Z
A Z
C X
A X
A X
B Z
A Y
A Y
A Z
C X
C Z
C Z
C X
C X
C X
A X
C X
C Z
C Y
C Z
C X
C Z
C X
A X
A Y
C X
A X
C X
B Z
B Z
B X
C X
A X
B X
C X
A Y
C Z
C Y
C Z
C X
A X
A Y
C Z
B Z
C X
B Z
C Z
B Z
A X
A X
C Y
B Z
C X
B Z
A Y
C Z
A Y
C Z
C X
A Z
C Z
C Z
B Z
A Y
B Z
C Y
C X
A Y
A X
A X
C X
C Y
B Z
C X
C Z
C Z
A X
A Y
C X
C Y
B Z
C Z
C X
A X
C Z
C X
C X
B Z
C Y
A Y
A X
C Z
B Z
C X
C Z
A Y
C X
B Z
C Y
B X
C X
C X
C Y
A Y
A X
C Y
C Y
C Z
C Y
C Y
C X
B X
C X
A Y
C Z
C Z
A Y
C Z
C Z
C Z
C Z
C Z
C Y
A Y
C Z
A X
C Y
C Z
C X
C Z
C X
A Z
C X
A Y
B Y
B Z
A Y
A Y
C Z
C X
B Z
B X
B Y
C X
C Z
B Z
A X
C X
C X
C Y
A X
C Z
C Y
A Y
A X
A X
B X
A Y
C Y
C Z
C Z
C X
C X
A X
C Z
A Z
A Y
A X
C X
A Y
B Z
C X
C Z
C Y
C Z
C Z
C X
C Z
A X
A Y
C X
C X
C X
C Z
C Y
C Z
B Z
C Z
B Z
A Y
A X
C Z
C X
C Z
C X
A X
C Z
C Z
C X
C X
C Z
A Y
A Z
A Y
C Z
C Z
C X
C Y
C X
C Y
A X
C X
A Y
B Z
B Z
C X
C X
C Z
C X
A Y
A Z
A Y
C X
C Z
A Y
C Y
C Z
B Z
A X
C X
C Z
C Z
A Y
A Y
A Y
A Y
C X
B Z
A Z
B X
A X
B X
C Z
C Z
C Z
B Z
A Y
C Z
C Y
C X
C Y
A Y
C X
C Y
C Y
A X
C Y
C X
C X
C X
C X
A Y
A Y
C X
C Z
C Z
A Y
C Z
A Y
C Z
C Z
C X
C X
C Z
C Y
C Z
A X
A X
C Y
B Z
A X
B Z
B Z
C X
C Z
C Y
A X
C Z
C Y
C Z
C Y
A Y
B X
C Y
C Y
C X
C X
C Z
C Z
C X
A Y
C Z
B Z
C Y
C X
C Y
C Z
C X
A X
A Y
C Z
B Z
C X
C Z
C X
C Z
C X
A X
C Z
A X
B Z
C X"""
